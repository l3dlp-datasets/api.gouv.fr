 {"openapi":"3.0.0","info":{"title":"SFiP","description":"Le courtier fonctionnel «SERVICES_FIP» propose au partenaire un catalogue de services issu des APIs existantes.","version":"v1"},"servers":[{"url":"https://IP-GATEWAY/sfip/v1"},{"url":"http://IP-GATEWAY/sfip/v1"}],"security":[{"default":[]}],"tags":[{"name":"SFiP","description":"API_Services_Finances_Publiques"}],"paths":{"/information":{"get":{"tags":["Information"],"summary":"Vérifier le statut de l'API","description":"Ressource permettant de vérifiant la disponibilité de l'API","operationId":"information","parameters":[{"$ref":"#/components/parameters/paramAuthorization"},{"$ref":"#/components/parameters/paramXCorrelationID"}],"responses":{"200":{"description":"L'API est disponible","content":{"application/vnd.dgfip.sfip.v1.0+json":{"schema":{"$ref":"#/components/schemas/Information"},"example":{"descriptif":"L'API est opérationnelle"}}}},"400":{"description":"Une erreur est survenue","content":{"application/vnd.dgfip.sfip.v1.0+json":{"schema":{"$ref":"#/components/schemas/Erreur"},"example":{"erreur":{"code":40401,"message":"L'API est actuellement indisponible","horodatage":"2022-01-20T13:03:01"}}}}},"default":{"description":"Une erreur est survenue","content":{"application/vnd.dgfip.sfip.v1.0+json":{"schema":{"$ref":"#/components/schemas/Erreur"},"example":{"erreur":{"code":40401,"message":"Une erreur est survenue","horodatage":"2022-01-20T13:03:01"}}}}}},"security":[{"default":[]}],"x-auth-type":"Application & Application User","x-throttling-tier":"6500_appels_par_min"}},"/demandeDeService/02GA/departement/{departement}/annrev/{annrev}/bareme/{bareme}/personne":{"get":{"tags":["SFiP"],"summary":"Ressource LEP","description":"Restituer l’indicateur LEP par critères","operationId":"lep","parameters":[{"$ref":"#/components/parameters/paramAuthorization"},{"$ref":"#/components/parameters/paramXCorrelationID"},{"name":"ID_Teleservice","in":"header","description":"Identifiant de téléservice appelant","required":true,"style":"simple","explode":false,"schema":{"type":"string"},"example":"SFIP_LEP"},{"name":"departement","in":"path","description":"Code du département ou TOM. Format: 2 caractères alphanumériques suivis de 0 (métropole): 130, 750... 3 caractères alphanumériques (TOM et DOM)","required":true,"style":"simple","explode":false,"schema":{"type":"string"},"example":130},{"name":"bareme","in":"path","description":"Année de barême","required":true,"style":"simple","explode":false,"schema":{"type":"string"},"example":2022},{"name":"annrev","in":"path","description":"Année de revenus","required":true,"style":"simple","explode":false,"schema":{"type":"string"},"example":2020},{"name":"nom","in":"query","description":"Nom de naissance de la personne recherchée, 100 car. Max.","required":false,"style":"form","explode":true,"schema":{"type":"string"},"example":"DUBIGNOT"},{"name":"prenom","in":"query","description":"Prénom de naissance de la personne recherchée, 20 car. Max. par prénom","required":false,"style":"form","explode":true,"schema":{"type":"string"},"example":"Jean Philippe Arnaud"},{"name":"sexe","in":"query","description":"Valeur possible : 1 = masculin ou 2 = féminin. Format : 1 caractère numérique","required":false,"style":"form","explode":true,"schema":{"type":"string"},"example":1},{"name":"naisDate","in":"query","description":"Date de naissance, trois formats différents acceptés : AAAA, MM/AAAA, ou JJ/MM/AAAA","required":false,"style":"form","explode":true,"schema":{"type":"string"},"example":"15/06/1943"},{"name":"naisCodePays","in":"query","description":"Code du pays sur 5 caractères numériques (cf nomenclature INSEE)","required":false,"style":"form","explode":true,"schema":{"type":"string"},"example":99100},{"name":"naisCodeDept","in":"query","description":"Code du département à la date de naissance ou TOM. Format : 2 caractères (métropole), 3 caractères (TOM et DOM)","required":false,"style":"form","explode":true,"schema":{"type":"string"},"example":75},{"name":"naisCodeCommune","in":"query","description":"Code commune, 3 caractères numériques (métropole),  2 caractères numériques (TOM et DOM) (cf nomenclature INSEE)","required":false,"style":"form","explode":true,"schema":{"type":"string"},"example":109},{"name":"adrCodePays","in":"query","description":"Code du pays sur 5 caractères numériques (cf nomenclature INSEE)","required":false,"style":"form","explode":true,"schema":{"type":"string"}},{"name":"adrCodeDept","in":"query","description":"Code du département ou TOM. Format : 2 caractères alphanumérique (métropole) 3 caractères alphanumérique (TOM et DOM)","required":false,"style":"form","explode":true,"schema":{"type":"string"}},{"name":"adrCodeCommune","in":"query","description":"Code commune, 3 caractères numériques (métropole).  Ce code commune correspond au 3 derniers caractères du code INSEE de la commune. 2 caractères numériques (TOM et DOM) (cf nomenclature INSEE) . Cette zone ne peut être valorisée que si un département Métropole ou DOM est précisé","required":false,"style":"form","explode":true,"schema":{"type":"string"}},{"name":"adrCodeVoie","in":"query","description":"4 caractères alphanumériques","required":false,"style":"form","explode":true,"schema":{"type":"string"}},{"name":"adrLibelleVoie","in":"query","description":"38 caractères alphanumériques. Cette zone ne peut être valorisée que si que si un département Métropole ou DOM et une commune sont précisés. ","required":false,"style":"form","explode":true,"schema":{"type":"string"}},{"name":"adrNumVoie","in":"query","description":"Numéro de l’adresse","required":false,"style":"form","explode":true,"schema":{"type":"string"}},{"name":"adrIndiceRepetition","in":"query","description":"Indice de répétition de l’adresse (B = bis, T = ter, Q = quater)","required":false,"style":"form","explode":true,"schema":{"type":"string"}},{"name":"spi","in":"query","description":"Numéro fiscal SPI sur 13 caractères (chiffres uniquement) ","required":false,"style":"form","explode":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Recherche réussie","content":{"application/vnd.dgfip.sfip.v1.0+json":{"schema":{"$ref":"#/components/schemas/Information"},"example":{"statut":"O"}}}},"400":{"description":"Problème sur le format de données","content":{"application/vnd.dgfip.sfip.v1.0+json":{"schema":{"$ref":"#/components/schemas/Erreur"},"example":{"erreur":{"code":4003,"message":"Un des paramètres en entrée est non conforme aux valeurs possibles","horodatage":"2022-01-20T13:03:01"}}}}},"403":{"description":"L'accès à cette ressource est non autorisé","content":{"application/vnd.dgfip.sfip.v1.0+json":{"schema":{"$ref":"#/components/schemas/Erreur"},"example":{"erreur":{"code":40305,"message":"Informations non disponibles pour la personne, merci de renseigner le numéro fiscal et la date de naissance","horodatage":"2022-01-20T13:03:01"}}}}},"404":{"description":"Aucune personne trouvée","content":{"application/vnd.dgfip.sfip.v1.0+json":{"schema":{"$ref":"#/components/schemas/Erreur"},"example":{"erreur":{"code":40433,"message":"Informations non disponibles pour la personne merci de renseigner le numéro fiscal et la date de naissance.","horodatage":"2022-01-20T13:03:01"}}}}},"410":{"description":"Aucun résultat","content":{"application/vnd.dgfip.sfip.v1.0+json":{"schema":{"$ref":"#/components/schemas/Erreur"},"example":{"erreur":{"code":4101,"message":"Absence de réponse","horodatage":"2022-01-20T13:03:01"}}}}},"default":{"description":"Une erreur est survenue","content":{"application/vnd.dgfip.sfip.v1.0+json":{"schema":{"$ref":"#/components/schemas/Erreur"},"example":{"erreur":{"code":40401,"message":"Une erreur est survenue","horodatage":"2022-01-20T13:03:01"}}}}}},"security":[{"Authorization":["sfip_lep"]},{"default":["sfip_lep"]}],"x-auth-type":"Application & Application User","x-throttling-tier":"6500_appels_par_min"}},"/demandeDeService/02AA/personne":{"get":{"tags":["SFiP"],"summary":"Situations IR Assiettes","description":"Restituer les données de la dernière imposition à l’IR","operationId":"service2aa","parameters":[{"$ref":"#/components/parameters/paramAuthorization"},{"$ref":"#/components/parameters/paramXCorrelationID"},{"name":"ID_Teleservice","in":"header","description":"Identifiant de téléservice appelant","required":true,"style":"simple","explode":false,"schema":{"type":"string"},"example":"SFIP_ACOSS_CISAP_exp2_HorsFC"},{"name":"nom","in":"query","description":"Nom de naissance de la personne recherchée, 100 car. Max.","required":false,"style":"form","explode":true,"schema":{"type":"string"},"example":"DUBIGNOT"},{"name":"prenom","in":"query","description":"Prénom de naissance de la personne recherchée, 20 car. Max. par prénom","required":false,"style":"form","explode":true,"schema":{"type":"string"},"example":"Jean Philippe Arnaud"},{"name":"sexe","in":"query","description":"Valeur possible : 1 = masculin ou 2 = féminin. Format : 1 caractère numérique","required":false,"style":"form","explode":true,"schema":{"type":"string"},"example":1},{"name":"naisDate","in":"query","description":"Date de naissance, trois formats différents acceptés : AAAA, MM/AAAA, ou JJ/MM/AAAA","required":false,"style":"form","explode":true,"schema":{"type":"string"},"example":"15/06/1943"},{"name":"naisCodePays","in":"query","description":"Code du pays sur 5 caractères numériques (cf nomenclature INSEE)","required":false,"style":"form","explode":true,"schema":{"type":"string"},"example":99100},{"name":"naisCodeDept","in":"query","description":"Code du département à la date de naissance ou TOM. Format : 2 caractères (métropole) 3 caractères (TOM et DOM)","required":false,"style":"form","explode":true,"schema":{"type":"string"},"example":75},{"name":"naisCodeCommune","in":"query","description":"Code commune, 3 caractères numériques (métropole),  2 caractères numériques (TOM et DOM) (cf nomenclature INSEE)","required":false,"style":"form","explode":true,"schema":{"type":"string"},"example":109},{"name":"adrCodePays","in":"query","description":"Code du pays sur 5 caractères numériques (cf nomenclature INSEE)","required":false,"style":"form","explode":true,"schema":{"type":"string"}},{"name":"adrCodeDept","in":"query","description":"Code du département ou TOM . Format : 2 caractères alphanumérique (métropole) 3 caractères alphanumérique (TOM et DOM)","required":false,"style":"form","explode":true,"schema":{"type":"string"}},{"name":"adrCodeCommune","in":"query","description":"Code commune, 3 caractères numériques (métropole).  Ce code commune correspond au 3 derniers caractères du code INSEE de la commune. 2 caractères numériques (TOM et DOM) (cf nomenclature INSEE) . Cette zone ne peut être valorisée que si un département Métropole ou DOM est précisé","required":false,"style":"form","explode":true,"schema":{"type":"string"}},{"name":"adrCodeVoie","in":"query","description":"4 caractères alphanumériques","required":false,"style":"form","explode":true,"schema":{"type":"string"}},{"name":"adrLibelleVoie","in":"query","description":"38 caractères alphanumériques. Cette zone ne peut être valorisée que si que si un département Métropole ou DOM et une commune sont précisés. ","required":false,"style":"form","explode":true,"schema":{"type":"string"}},{"name":"adrNumVoie","in":"query","description":"Numéro de l’adresse","required":false,"style":"form","explode":true,"schema":{"type":"string"}},{"name":"adrIndiceRepetition","in":"query","description":"Indice de répétition de l’adresse (B = bis, T = ter, Q = quater)","required":false,"style":"form","explode":true,"schema":{"type":"string"}},{"name":"spi","in":"query","description":"Numéro fiscal SPI sur 13 caractères (chiffres uniquement) ","required":false,"style":"form","explode":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Recherche réussie","content":{"application/vnd.dgfip.sfip.v1.0+json":{"schema":{"$ref":"#/components/schemas/Information"},"example":{"sitFam":"V","nmNaiDec1":"DUBIGNOT","prnmDec1":"Jean Philippe Arnaud","rev":{}}}}},"400":{"description":"Problème sur le format de données","content":{"application/vnd.dgfip.sfip.v1.0+json":{"schema":{"$ref":"#/components/schemas/Erreur"},"example":{"erreur":{"code":4003,"message":"Un des paramètres en entrée est non conforme aux valeurs possibles","horodatage":"2022-01-20T13:03:01"}}}}},"403":{"description":"L'accès à cette ressource est non autorisé","content":{"application/vnd.dgfip.sfip.v1.0+json":{"schema":{"$ref":"#/components/schemas/Erreur"},"example":{"erreur":{"code":40305,"message":"Informations non disponibles pour la personne, merci de renseigner le numéro fiscal et la date de naissance","horodatage":"2022-01-20T13:03:01"}}}}},"404":{"description":"Aucune personne trouvée","content":{"application/vnd.dgfip.sfip.v1.0+json":{"schema":{"$ref":"#/components/schemas/Erreur"},"example":{"erreur":{"code":40433,"message":"Informations non disponibles pour la personne merci de renseigner le numéro fiscal et la date de naissance.","horodatage":"2022-01-20T13:03:01"}}}}},"416":{"description":"Aucun résultat","content":{"application/vnd.dgfip.sfip.v1.0+json":{"schema":{"$ref":"#/components/schemas/Erreur"},"example":{"erreur":{"code":4101,"message":"Absence de réponse","horodatage":"2022-01-20T13:03:01"}}}}},"default":{"description":"Une erreur est survenue","content":{"application/vnd.dgfip.sfip.v1.0+json":{"schema":{"$ref":"#/components/schemas/Erreur"},"example":{"erreur":{"code":40401,"message":"Une erreur est survenue","horodatage":"2022-01-20T13:03:01"}}}}}},"security":[{"Authorization":["sfip_donnees_fiscales_usagers"]},{"default":["sfip_donnees_fiscales_usagers"]}],"x-auth-type":"Application & Application User","x-throttling-tier":"6500_appels_par_min"}}},"components":{"schemas":{"Erreur":{"type":"object","properties":{"erreur":{"$ref":"#/components/schemas/erreur"}}},"erreur":{"type":"object","properties":{"code":{"type":"integer","description":"Code de l'erreur","format":"int32","example":42},"message":{"type":"string","description":"Message de description de l'erreur","example":"Une erreur est survenue"},"horodatage":{"type":"string","description":"Horodatage de l'erreur","example":"2021-06-25T19:39:56+02:00"}},"description":"erreur"},"Information":{"type":"object","properties":{"descriptif":{"type":"string","description":"L'API est opérationnelle","example":"L'API est opérationnelle"}}}},"parameters":{"paramAuthorization":{"name":"Authorization","in":"header","description":"Jeton d'authentification. Header Authorization standard, utilisant un schéma Bearer. Exemple: \"bearer {token}\"","required":true,"style":"simple","explode":false,"schema":{"type":"string"}},"paramXCorrelationID":{"name":"X-Correlation-ID","in":"header","description":"Identifiant de corrélation de la requête (format UUID)","required":true,"style":"simple","explode":false,"schema":{"pattern":"^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$","type":"string","format":"uuid"},"example":"62d8e8ff-ce4f-4e50-b318-1edd2dab0f9f"}},"securitySchemes":{"Authorization":{"type":"oauth2","description":"OAuth 2.0 avec un grant type Client Credentials. Header Authorization standard, utilisant un schéma Bearer. Exemple: \\\"Bearer {token}\\\"","flows":{"clientCredentials":{"tokenUrl":"https://IP-GATEWAY/token","scopes":{"sfip_donnees_fiscales_usagers":"Données fiscales des usagers","sfip_lep":"LEP"},"x-scopes-bindings":{"sfip_donnees_fiscales_usagers":"","sfip_lep":""}}}},"default":{"type":"oauth2","flows":{"implicit":{"authorizationUrl":"https://IP-GATEWAY/authorize","scopes":{"sfip_donnees_fiscales_usagers":"Données fiscales des usagers","sfip_lep":"LEP"},"x-scopes-bindings":{"sfip_donnees_fiscales_usagers":"","sfip_lep":""}}}}}}}